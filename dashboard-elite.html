<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KNWKMT2X');</script>
    <!-- End Google Tag Manager -->
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#ffffff">
    <title>ResponseAI - Elite Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="elite-theme.css">
    
    <style>
        /* Dashboard-specific enhancements */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 280px 1fr;
            min-height: 100vh;
        }
        
        .main-content {
            padding: var(--spacing-xl);
            background: var(--surface-primary);
            overflow-y: auto;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
        }
        
        .chart-container {
            height: 300px;
            position: relative;
        }
        
        .review-item {
            padding: var(--spacing-lg);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-lg);
            background: var(--surface-elevated);
            transition: all var(--transition-duration-normal) var(--transition-timing-function);
        }
        
        .review-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--elevation-3);
            border-color: var(--border-secondary);
        }
        
        .ai-response-preview {
            background: linear-gradient(135deg, 
                rgba(102, 126, 234, 0.05), 
                rgba(118, 75, 162, 0.05));
            border-left: 3px solid var(--brand-primary);
            padding: var(--spacing-md);
            border-radius: 0 var(--radius-md) var(--radius-md) 0;
            margin-top: var(--spacing-md);
        }
        
        .activity-timeline {
            position: relative;
            padding-left: var(--spacing-lg);
        }
        
        .activity-timeline::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(180deg, var(--brand-primary), var(--brand-secondary));
        }
        
        .activity-item {
            position: relative;
            padding-bottom: var(--spacing-lg);
        }
        
        .activity-item::before {
            content: '';
            position: absolute;
            left: -12px;
            top: 6px;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--brand-primary);
            border: 2px solid var(--surface-primary);
        }
        
        .metric-change {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-medium);
        }
        
        .metric-change.positive {
            color: var(--state-success);
        }
        
        .metric-change.negative {
            color: var(--state-error);
        }
        
        .search-bar {
            position: relative;
            max-width: 400px;
        }
        
        .search-bar .search-icon {
            position: absolute;
            left: var(--spacing-md);
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-tertiary);
            pointer-events: none;
        }
        
        .search-bar input {
            padding-left: calc(var(--spacing-xl) + var(--spacing-md));
        }
        
        /* Chart theming */
        .chart-container canvas {
            border-radius: var(--radius-md);
        }
        
        /* Responsive design */
        @media (max-width: 1024px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .elite-sidebar {
                position: fixed;
                top: 0;
                left: -280px;
                height: 100vh;
                width: 280px;
                z-index: 1000;
                transition: left var(--transition-duration-normal) var(--transition-timing-function);
            }
            
            .elite-sidebar.open {
                left: 0;
            }
            
            .main-content {
                padding: var(--spacing-lg);
            }
        }
        
        @media (max-width: 640px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: var(--spacing-md);
            }
        }
    </style>
</head>
<body class="neural-pattern">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/gtm.ns.html?id=GTM-KNWKMT2X"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <div class="dashboard-grid">
        <!-- Elite Sidebar -->
        <aside class="elite-sidebar">
            <div class="p-6">
                <!-- Brand -->
                <div class="flex items-center gap-3 mb-8">
                    <div class="w-10 h-10 rounded-xl elite-gradient flex items-center justify-center">
                        <i class="fas fa-brain text-white text-lg"></i>
                    </div>
                    <div>
                        <h1 class="text-heading-3 gradient-text">ResponseAI</h1>
                        <p class="text-caption">Elite Dashboard</p>
                    </div>
                </div>

                <!-- Navigation -->
                <nav class="space-y-2">
                    <a href="#dashboard" class="elite-nav-item active">
                        <i class="fas fa-chart-line w-5"></i>
                        <span>Dashboard</span>
                    </a>
                    <a href="#reviews" class="elite-nav-item">
                        <i class="fas fa-star w-5"></i>
                        <span>Reviews</span>
                    </a>
                    <a href="#responses" class="elite-nav-item">
                        <i class="fas fa-reply w-5"></i>
                        <span>AI Responses</span>
                    </a>
                    <a href="#analytics" class="elite-nav-item">
                        <i class="fas fa-chart-bar w-5"></i>
                        <span>Analytics</span>
                    </a>
                    <a href="#settings" class="elite-nav-item">
                        <i class="fas fa-cog w-5"></i>
                        <span>Settings</span>
                    </a>
                </nav>

                <!-- AI Laboratory -->
                <div class="mt-8 p-4 bg-gradient-to-br from-purple-50 to-blue-50 rounded-xl border border-purple-100">
                    <div class="flex items-center gap-2 mb-3">
                        <i class="fas fa-flask text-purple-600"></i>
                        <span class="text-sm font-semibold text-purple-900">AI Laboratory</span>
                    </div>
                    <p class="text-xs text-purple-700 mb-3">Test AI responses in real-time</p>
                    <button class="elite-button w-full" onclick="openAILab()">
                        <i class="fas fa-play mr-2"></i>
                        Launch Lab
                    </button>
                </div>

                <!-- Theme Toggle -->
                <div class="mt-8 pt-6 border-t border-gray-200" id="theme-toggle-container">
                    <!-- Theme toggle will be inserted here -->
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="flex items-center justify-between mb-8">
                <div>
                    <h1 class="text-heading-1 mb-2">Dashboard Overview</h1>
                    <p class="text-body text-secondary">Monitor your AI-powered review responses</p>
                </div>
                
                <div class="flex items-center gap-4">
                    <!-- Search Bar -->
                    <div class="search-bar">
                        <div class="search-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <input type="text" class="elite-input" placeholder="Search reviews, responses...">
                    </div>
                    
                    <!-- Mobile Menu Toggle -->
                    <button class="lg:hidden elite-button" onclick="toggleSidebar()">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </header>

            <!-- Stats Grid -->
            <div class="stats-grid">
                <div class="elite-card">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-overline mb-2">Total Reviews</p>
                            <p class="text-heading-2">2,847</p>
                            <div class="metric-change positive mt-2">
                                <i class="fas fa-arrow-up"></i>
                                <span>+12.5% from last month</span>
                            </div>
                        </div>
                        <div class="w-12 h-12 rounded-xl bg-blue-100 flex items-center justify-center">
                            <i class="fas fa-star text-blue-600 text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="elite-card">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-overline mb-2">AI Responses</p>
                            <p class="text-heading-2">2,391</p>
                            <div class="metric-change positive mt-2">
                                <i class="fas fa-arrow-up"></i>
                                <span>+8.3% response rate</span>
                            </div>
                        </div>
                        <div class="w-12 h-12 rounded-xl bg-purple-100 flex items-center justify-center">
                            <i class="fas fa-brain text-purple-600 text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="elite-card">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-overline mb-2">Avg Response Time</p>
                            <p class="text-heading-2">1.2s</p>
                            <div class="metric-change positive mt-2">
                                <i class="fas fa-arrow-down"></i>
                                <span>-0.3s improvement</span>
                            </div>
                        </div>
                        <div class="w-12 h-12 rounded-xl bg-green-100 flex items-center justify-center">
                            <i class="fas fa-clock text-green-600 text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="elite-card">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-overline mb-2">Customer Satisfaction</p>
                            <p class="text-heading-2">96.8%</p>
                            <div class="metric-change positive mt-2">
                                <i class="fas fa-arrow-up"></i>
                                <span>+2.1% this week</span>
                            </div>
                        </div>
                        <div class="w-12 h-12 rounded-xl bg-orange-100 flex items-center justify-center">
                            <i class="fas fa-heart text-orange-600 text-xl"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chart Section -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <div class="elite-card">
                    <h3 class="text-heading-3 mb-4">Review Volume</h3>
                    <div class="chart-container">
                        <canvas id="reviewChart"></canvas>
                    </div>
                </div>

                <div class="elite-card">
                    <h3 class="text-heading-3 mb-4">Response Effectiveness</h3>
                    <div class="chart-container">
                        <canvas id="effectivenessChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Recent Reviews -->
                <div class="lg:col-span-2">
                    <div class="elite-card">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-heading-3">Recent Reviews</h3>
                            <button class="elite-button elite-button--secondary">
                                <i class="fas fa-external-link-alt mr-2"></i>
                                View All
                            </button>
                        </div>

                        <div class="space-y-4">
                            <!-- Review Item 1 -->
                            <div class="review-item">
                                <div class="flex items-start justify-between mb-3">
                                    <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center">
                                            <span class="font-semibold text-blue-600">JD</span>
                                        </div>
                                        <div>
                                            <p class="font-semibold">John Doe</p>
                                            <div class="flex items-center gap-1">
                                                <div class="flex text-yellow-400">
                                                    <i class="fas fa-star"></i>
                                                    <i class="fas fa-star"></i>
                                                    <i class="fas fa-star"></i>
                                                    <i class="fas fa-star"></i>
                                                    <i class="fas fa-star"></i>
                                                </div>
                                                <span class="text-sm text-gray-500 ml-2">2 hours ago</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="status-indicator success">
                                        <i class="fas fa-check"></i>
                                        Responded
                                    </div>
                                </div>
                                
                                <p class="text-gray-700 mb-3">"Amazing service! The AI responses are so natural and helpful. Definitely recommend this platform."</p>
                                
                                <div class="ai-response-preview">
                                    <p class="text-sm font-medium text-purple-800 mb-1">AI Response:</p>
                                    <p class="text-sm text-gray-700">"Thank you so much for your wonderful review, John! We're thrilled to hear that our AI responses have been helpful and natural. Your feedback motivates us to continue improving our platform. We appreciate your recommendation!"</p>
                                </div>
                            </div>

                            <!-- Review Item 2 -->
                            <div class="review-item">
                                <div class="flex items-start justify-between mb-3">
                                    <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center">
                                            <span class="font-semibold text-purple-600">SM</span>
                                        </div>
                                        <div>
                                            <p class="font-semibold">Sarah Miller</p>
                                            <div class="flex items-center gap-1">
                                                <div class="flex text-yellow-400">
                                                    <i class="fas fa-star"></i>
                                                    <i class="fas fa-star"></i>
                                                    <i class="fas fa-star"></i>
                                                    <i class="fas fa-star"></i>
                                                    <i class="far fa-star"></i>
                                                </div>
                                                <span class="text-sm text-gray-500 ml-2">4 hours ago</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="status-indicator warning">
                                        <i class="fas fa-clock"></i>
                                        Pending
                                    </div>
                                </div>
                                
                                <p class="text-gray-700">"Good platform overall, but I'd love to see more customization options for the AI responses. The quality is there, just needs more flexibility."</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Activity Timeline -->
                <div class="elite-card">
                    <h3 class="text-heading-3 mb-6">Recent Activity</h3>
                    
                    <div class="activity-timeline">
                        <div class="activity-item">
                            <div class="flex items-center gap-2 mb-1">
                                <span class="text-sm font-medium">AI Response Generated</span>
                                <span class="text-xs text-gray-500">2 min ago</span>
                            </div>
                            <p class="text-sm text-gray-600">Response created for John Doe's 5-star review</p>
                        </div>

                        <div class="activity-item">
                            <div class="flex items-center gap-2 mb-1">
                                <span class="text-sm font-medium">New Review Received</span>
                                <span class="text-xs text-gray-500">15 min ago</span>
                            </div>
                            <p class="text-sm text-gray-600">Sarah Miller left a 4-star review</p>
                        </div>

                        <div class="activity-item">
                            <div class="flex items-center gap-2 mb-1">
                                <span class="text-sm font-medium">Batch Processing Complete</span>
                                <span class="text-xs text-gray-500">1 hour ago</span>
                            </div>
                            <p class="text-sm text-gray-600">Processed 47 reviews successfully</p>
                        </div>

                        <div class="activity-item">
                            <div class="flex items-center gap-2 mb-1">
                                <span class="text-sm font-medium">System Update</span>
                                <span class="text-xs text-gray-500">3 hours ago</span>
                            </div>
                            <p class="text-sm text-gray-600">AI model updated to v2.1.3</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- AI Laboratory Modal (Hidden by default) -->
    <div id="aiLabModal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm"></div>
        <div class="relative h-full flex items-center justify-center p-4">
            <div class="elite-card w-full max-w-4xl max-h-[90vh] overflow-y-auto">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-heading-2 gradient-text">AI Response Laboratory</h2>
                    <button class="elite-button elite-button--secondary" onclick="closeAILab()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Input Section -->
                    <div>
                        <h3 class="text-heading-3 mb-4">Test Review Input</h3>
                        
                        <div class="floating-label-container mb-4">
                            <textarea 
                                id="testReview" 
                                class="elite-input min-h-[120px] resize-none" 
                                placeholder=" "
                                rows="5"></textarea>
                            <label class="floating-label">Enter a sample review...</label>
                        </div>

                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div class="floating-label-container">
                                <select id="testRating" class="elite-input">
                                    <option value=""></option>
                                    <option value="1">⭐ 1 Star</option>
                                    <option value="2">⭐⭐ 2 Stars</option>
                                    <option value="3">⭐⭐⭐ 3 Stars</option>
                                    <option value="4">⭐⭐⭐⭐ 4 Stars</option>
                                    <option value="5">⭐⭐⭐⭐⭐ 5 Stars</option>
                                </select>
                                <label class="floating-label">Rating</label>
                            </div>

                            <div class="floating-label-container">
                                <input type="text" id="testPlatform" class="elite-input" placeholder=" ">
                                <label class="floating-label">Platform (Google, Yelp, etc.)</label>
                            </div>
                        </div>

                        <button class="elite-button w-full" onclick="generateTestResponse()">
                            <i class="fas fa-magic mr-2"></i>
                            Generate AI Response
                        </button>
                    </div>

                    <!-- Output Section -->
                    <div>
                        <h3 class="text-heading-3 mb-4">AI Response Output</h3>
                        
                        <div id="aiResponseOutput" class="min-h-[200px] p-4 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center text-gray-500">
                            Click "Generate AI Response" to see the magic happen!
                        </div>

                        <div class="mt-4 p-4 bg-blue-50 rounded-lg">
                            <div class="flex items-center gap-2 mb-2">
                                <i class="fas fa-info-circle text-blue-600"></i>
                                <span class="font-medium text-blue-900">Pro Tips</span>
                            </div>
                            <ul class="text-sm text-blue-800 space-y-1">
                                <li>• Try different review tones (positive, negative, neutral)</li>
                                <li>• Test various platforms for contextual responses</li>
                                <li>• Experiment with different star ratings</li>
                                <li>• Use real customer language for best results</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="elite-theme-controller.js"></script>
    <script>
        // Initialize theme toggle
        document.addEventListener('DOMContentLoaded', function() {
            const themeToggleContainer = document.getElementById('theme-toggle-container');
            const themeToggle = EliteComponents.createThemeToggle(window.eliteTheme);
            themeToggleContainer.appendChild(themeToggle);

            // Initialize charts
            initializeCharts();
        });

        // Sidebar toggle for mobile
        function toggleSidebar() {
            const sidebar = document.querySelector('.elite-sidebar');
            sidebar.classList.toggle('open');
        }

        // AI Laboratory functions
        function openAILab() {
            document.getElementById('aiLabModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeAILab() {
            document.getElementById('aiLabModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        function generateTestResponse() {
            const review = document.getElementById('testReview').value;
            const rating = document.getElementById('testRating').value;
            const platform = document.getElementById('testPlatform').value;
            const output = document.getElementById('aiResponseOutput');

            if (!review.trim()) {
                output.innerHTML = '<p class="text-red-500"><i class="fas fa-exclamation-circle mr-2"></i>Please enter a review to test!</p>';
                return;
            }

            // Show loading state
            output.innerHTML = `
                <div class="flex items-center justify-center">
                    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mr-3"></div>
                    <span>Generating AI response...</span>
                </div>
            `;

            // Simulate API call
            setTimeout(() => {
                fetch('/api/test-response', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        review: review,
                        rating: rating,
                        platform: platform
                    })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.error) {
                        output.innerHTML = `<p class="text-red-500"><i class="fas fa-exclamation-circle mr-2"></i>${data.error}</p>`;
                    } else {
                        output.innerHTML = `
                            <div class="text-left">
                                <div class="flex items-center gap-2 mb-3">
                                    <i class="fas fa-robot text-purple-600"></i>
                                    <span class="font-medium text-purple-900">AI Generated Response</span>
                                </div>
                                <div class="bg-white p-4 rounded-lg border border-purple-200">
                                    <p class="text-gray-800 leading-relaxed">${data.response}</p>
                                </div>
                                <div class="mt-3 text-sm text-gray-600">
                                    <i class="fas fa-clock mr-1"></i>
                                    Generated in ${data.generation_time || '1.2'}s
                                </div>
                            </div>
                        `;
                    }
                })
                .catch(error => {
                    output.innerHTML = `<p class="text-red-500"><i class="fas fa-exclamation-circle mr-2"></i>Error generating response. Please try again.</p>`;
                    console.error('Error:', error);
                });
            }, 1000);
        }

        // Initialize charts
        function initializeCharts() {
            // Review Volume Chart
            const reviewCtx = document.getElementById('reviewChart').getContext('2d');
            new Chart(reviewCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Reviews',
                        data: [1200, 1900, 3000, 5000, 2000, 3000],
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0,0,0,0.05)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });

            // Effectiveness Chart
            const effectivenessCtx = document.getElementById('effectivenessChart').getContext('2d');
            new Chart(effectivenessCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Positive', 'Neutral', 'Negative'],
                    datasets: [{
                        data: [75, 20, 5],
                        backgroundColor: [
                            '#10b981',
                            '#f59e0b',
                            '#ef4444'
                        ],
                        borderWidth: 0,
                        cutout: '70%'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                usePointStyle: true
                            }
                        }
                    }
                }
            });
        }

        // Close modal when clicking outside
        document.getElementById('aiLabModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeAILab();
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Close modal with Escape
            if (e.key === 'Escape') {
                closeAILab();
            }
            
            // Open AI Lab with Ctrl/Cmd + K
            if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                e.preventDefault();
                openAILab();
            }
        });
    </script>
</body>
</html>
